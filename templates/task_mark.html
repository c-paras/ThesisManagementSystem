<div class="row col s12">
  <br>
  <div>
    <b>Assessment:</b>
  </div>
  <div>
    <table class="striped centered responsive-table">
      <thead>
        <tr>
          <th style='width: 25%;'>Criteria</th>
          {% if submission['markingMethod'] == 'approval' %}
            <th style='width: 10%;'>Approved</th>
          {% else %}
            <th style='width: 10%;'>Max Mark</th>
            <th style='width: 10%;'>Assigned Mark</th>
          {% endif %}
          <th style='width: 55%;'>Feedback</th>
          <!-- <th class="right-align">Edit</th> -->
        </tr>
      </thead>
      <tbody>
        {% for i in range(0, taskCriteria|length) %}
          <tr>
            <td>{{ taskCriteria[i][2] }}</td>
            {% if markedFeedback[i] == [] %}
              {% if submission['markingMethod'] == 'approval' %}
                <td>
                  <label>
                    {% if submission['status'] == 'approved' %}
                      <input id="approveCheck" type="checkbox" class="filled-in" checked="checked"/>
                    {% else %}
                      <input id="approveCheck" type="checkbox" class="filled-in"/>
                    {% endif %}
                    <span></span>
                  </label>
                </td>
              {% else %}
                <td>{{ taskCriteria[i][3] }}</td>
                <td>
                  <input id="enteredMark" type="number" min="0" max="{{ taskCriteria[i][3] }}">
                </td>
              {% endif %}
              <td>
                <div>
                  <textarea id="enteredFeedback" class="materialize-textarea"
                            rows="5" style="overflow:auto;" placeholder="Enter Feedback"></textarea>
                </div>
              </td>
            {% else %}
              {% if submission['markingMethod'] == 'approval' %}
                <td>
                  <label>
                    {% if submission['status'] == 'approved' %}
                      <input id="approveCheck" type="checkbox" class="filled-in" checked="checked"/>
                    {% else %}
                      <input id="approveCheck" type="checkbox" class="filled-in"/>
                    {% endif %}
                    <span></span>
                  </label>
                </td>
              {% else %}
                <td>{{ taskCriteria[i][3] }}</td>
                <td>
                  <input id="enteredMark" type="number" min="0" max="{{ taskCriteria[i][3] }}" value="{{markedFeedback[i][0][0]}}">
                </td>
              {% endif %}
              <td>
                {% if markedFeedback[i][0][1] == None %}
                  <div>
                    <textarea id="enteredFeedback" class="materialize-textarea"
                              rows="5" style="overflow:auto; max-height: 5em;" placeholder="Enter Feedback"></textarea>
                  </div>
                {% else %}
                  <div>
                    <textarea id="enteredFeedback" class="materialize-textarea"
                              rows="5" style="overflow:auto; max-height: 5em;">{{markedFeedback[i][0][1]}}</textarea>
                  </div>
                {% endif %}
              </td>
            {% endif %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<div class="row col s12 right">
  <a class="waves-effect waves-light btn" id="search-btn" 
     onclick="updateMarks({{taskCriteria[0][1]}}, {{studentId}}, {{taskCriteriaId}}, {{taskMax}})">Commit Marks
    <i class="material-icons right">send</i>
  </a>
</div>
<script type="text/javascript" src="{{ url_for('static', filename='js/mark.js') }}" defer></script>