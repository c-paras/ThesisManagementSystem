{% extends "base.html" %}

{% block body %}
  <div class="row">

    <!-- Show staff their current topic requests -->
    <div class="section col s12">
      <h5>Topic Requests:</h5>
      {% if curr_requests|length %}
        <table class="striped centered responsive-table" style="margin-bottom: 10px;">

          <!-- Table header -->
          <thead>
            <tr>
              <th>Name</th>
              <th>zID</th>
              <th>Topic</th>
              <th>Review</th>
            </tr>
          </thead>

          <!-- Table body -->
          <tbody>
            {% for request in curr_requests %}
              <tr>
                <td>{{ request['stu_name'] }}</td>
                <td>{{ request['stu_email'].split('@')[0] }}</td>
                <td>{{ request['topic_name'] }}</td>
                <td>
                  <a
                    class="waves-effect waves-light btn-floating btn-small" href="#"
                    onclick="openRequestModal({{ request['stu_id'] }}, {{ request['topic_id'] }})"
                  >
                    <i class="large material-icons">insert_chart</i>
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>You have no topic requests at this time</p>
      {% endif %}
    </div>

    <!-- Show staff their current students -->
    <div class="section col s12">
      <h5>Current Students:</h5>
      {% if curr_students|length %}
        <table class="striped centered responsive-table" style="margin-bottom: 10px;">

          <!-- Table header -->
          <thead>
            <tr>
              <th>Name</th>
              <th>zID</th>
              <th>Topic</th>
              <th>Role</th>
              <th>Submissions</th>
            </tr>
          </thead>

          <!-- Table body -->
          <tbody>
            {% for student in curr_students %}
              <tr>
                <td>{{ student[0] }}</td>
                <td>{{ student[1].split('@')[0] }}</td>
                <td>{{ student[2] }}</td>
                <td>{{ student[4] }}</td>
                <td>
                  <a href="{{ url_for('submissions.view_submission', submissions=student[3]) }}">
                    <i class="small material-icons teal-text">pageview</i>
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>You have no students at this time</p>
      {% endif %}
    </div>

    <!-- Show staff their past students -->
    <div class="section col s12">
      <h5>Past Students:</h5>
      {% if past_students|length %}
        <table class="striped centered responsive-table">

          <!-- Table header -->
          <thead>
            <tr>
              <th>Name</th>
              <th>zID</th>
              <th>Topic</th>
              <th>Role</th>
              <th>Submissions</th>
            </tr>
          </thead>

          <!-- Table body -->
          <tbody>
            {% for student in past_students %}
              <tr>
                <td>{{ student[0] }}</td>
                <td>{{ student[1].split('@')[0] }}</td>
                <td>{{ student[2] }}</td>
                <td>{{ student[4] }}</td>
                <td>
                  <a href="{{ url_for('submissions.view_submission', submissions=student[3]) }}">
                    <i class="small material-icons teal-text">pageview</i>
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        You have no past students
      {% endif %}
    </div>

    {% if curr_requests|length %}
      {% include "modals/respond_topic.html" %}
    {% endif %}

  </div>
{% endblock %}
