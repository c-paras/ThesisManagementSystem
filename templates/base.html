<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      TMS - {{ title }}
    </title>

    <!-- Import Google Icon Font -->
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Import materialize.css -->
    <link
      type="text/css"
      rel="stylesheet"
      href="{{ url_for('static', filename='css/materialize.min.css') }}" media="screen,projection"
    >

    <!-- Custom CSS and materialize overrides -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    <!-- Let browser know website is optimized for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body>
    {% if not hide_navbar %}
      <!-- Dropdown -->
      <ul id="nav-bar-dropdown" class="dropdown-content">
        <li><a href="#!">Search Topics</a></li>

        {% if session['acc_type'] == 'supervisor' or session['acc_type'] == 'course_admin' %}
          <li><a href="#!">Create Topic</a></li>
          <li><a href="#!">Manage Topics</a></li>
        {% endif %}
        {% if  session['acc_type'] == 'course_admin' %}
          <li><a href="#!">Create Course</a></li>
          <li><a href="#!">Manage Course</a></li>
          <li><a href="#!">Add Staff</a></li>
        {% endif %}
        
        <li class="divider"></li>
        <li><a href="#!">Change Password</a></li>
        <li><a href="#!">Logout</a></li>
      </ul>

      <!-- Navigation -->
      <nav>
        <div class="nav-wrapper">
          <a href="/" class="brand-logo">&nbsp;TMS</a>
          <ul class="right hide-on-med-and-down">
            <li>
              <a class="dropdown-trigger" href="#!" data-target="nav-bar-dropdown">
                You are logged in as z1111111 <!-- TODO -->
                <i class="material-icons right">arrow_drop_down</i>
              </a>
            </li>
          </ul>
        </div>
      </nav>
    {% endif %}

    <div class="container">
      {% if not hide_navbar and heading %}
        {# There should be a heading on any page with a navbar #}
        {# If heading is blank, do not show <hr> #}
        <h3>{{ heading }}</h3>
        <hr>
      {% endif %}

      <!-- Page content -->
      {% block body %}
      {% endblock %}
    </div>

    <!-- JavaScript at end of body for optimized loading -->
    <script
      type="text/javascript"
      src="{{ url_for('static', filename='js/vendor/jquery-3.4.1.min.js') }}"
    ></script>

    <!-- Materialize must load after JQuery -->
    <script
      type="text/javascript"
      src="{{ url_for('static', filename='js/vendor/materialize.min.js') }}"
    ></script>

    <!-- Global JavaScript helpers -->
    <script
      type="text/javascript"
      src="{{ url_for('static', filename='js/helpers.js') }}"
    ></script>

    {% if not hide_navbar %}
      <script type="text/javascript">
        /* Activate navbar dropdown */
        $(document).ready(function () {
          $('.dropdown-trigger').dropdown({ hover: true })
        })
      </script>
    {% endif %}

    <!-- Include page-specific JavaScript automatically -->
    {% set js_file = 'js/' ~ self._TemplateReference__context.name|replace('html', 'js') %}
    {% set js_include = url_for('static', filename=js_file) %}
    {# The convention is for the JavaScript file to have the same prefix as the HTML template #}
    {# If additional JavaScript files are needed, they must be manually included in the template itself #}
    {% if js_include[1:]|file_exists %}
      <script type="text/javascript" src="{{ js_include }}"></script>
    {% endif %}
  </body>
</html>
